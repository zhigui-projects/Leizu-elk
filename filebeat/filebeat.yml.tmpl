filebeat.prospectors:
- type: log
  paths:
  - '/var/lib/docker/containers/*/*.log'
  json.message_key: log
  json.keys_under_root: true
  processors:
  - add_docker_metadata: ~

output.elasticsearch:
  # Array of hosts to connect to.
  hosts: ["${ELASTIC_SEARCH_HOST}"]
  index: "docker-logs-%{+yyyy.MM.dd}"

setup.template:
  name: "docker-logs"
  pattern: "*"